{% extends 'base.html' %}
{% load static %}

{% block content %}

  <div class="container">

    <h2 class=" mt-4">제목 :
      {{ meeting.title }}</h2>
    <p>내용 :
      {{ meeting.content }}</p>

    <div class="my-5">
      <h4 class="fw-bold">리뷰 작성</h4>
      {% if request.user.is_authenticated %}
        <form action="{% url 'meetings:comment_create' meeting.pk %}" method="POST">
          {% csrf_token %}
          <input type="text">
          <button class="btn btn-outline-primary ">작성</button>
        </form>
      {% endif %}
    </div>

    <div class="my-3">
      댓글 수 :
      {{ metting.comment_set.count }}
    </div>

    {% for comment in comments %}
      <div>
        <p>{{ comment.user.username }}</p>
      </div>
      <p class="fs-6">{{ comment.created_at|date:"SHORT_DATETIME_FORMAT" }}</p>
      <p>{{ comment.content }}</p>

      {% if request.user == comment.user %}
        <form action="{% url 'mettings:comment_delete' metting.pk comment.pk %}" method="POST">
          {% csrf_token %}
          <button>삭제</button>
        </form>
      {% else %}
      {% endif %}
      <hr>
      {% empty %}
      <p>댓글이 없습니다.</p>
    {% endfor %}

    <div>
      <a class="btn btn-outline-secondary" href="{% url 'meetings:index' %}">목록</a>
      {% if request.user == meeting.user %}
        <a class="float-end btn btn-outline-primary" href="{% url 'meetings:update' meeting.pk %}">
          수정
        </a>
        <a class="float-end btn btn-outline-danger" href="{% url 'meetings:delete' meeting.pk %}">
          삭제
        </a>
      {% endif %}
    </div>
  </div>

{% endblock content %}
