{% extends 'base.html' %}
{% load django_bootstrap5 %}
{% load static %}
{% block content %} 

<style>
  body {
    background-image : url('{% static 'images/개인카드배경6.jpg' %}');
    background-repeat : repeat;
    background-size : cover;
    {% comment %} color:white; {% endcomment %}
   }
</style>
<div class="d-flex justify-content-center">
  <div>
    {% if cards.user == request.user %}
    <div class='d-flex justify-content-end'>
      <a href="{% url 'cards:usercard_update' request.user.pk %}" class="btn btn-success mt-5 me-3"> 벽난로 바꾸기 </a>
      <a href="{% url 'cards:usercard_delete'%}" class="btn btn-danger mt-5"> 벽난로 없애기 </a>
    </div>
    {% endif %}
    <p class=' my-5 fs-1 text-center' style='color:white'>{{ cards.user.nickname }} 님에게 <span style='color:orangered '>{{ cards.usercomment_set.count }}</span>개의 메세지가 전달됐어요!</p>
    <div class=''>
      <!-- 벽난로 주인의 장식 모달 창 -->
      <div class="modal fade" id="owner" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-body">
              <div class='d-flex justify-content-center'>
                <img src='/static/images/유저장식{{ cards.userdeco }}.png' style='width:4rem;'>
              </div>
              <div class='mb-2 rounded-2 p-1'>
                <p class='text-center fs-5 my-5'>{{ cards.title }} </p>
                <p class='my-1 text-center'>{{ cards.content }} </p>
              </div>
              <div class='d-grid mt-5'>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" aria-label="Close">닫기</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class>
        {% if cards.chimneys %}
          {% if cards.userdeco %}
          <div style='position:relative' class='my-5'>
            <img src="/static/images/벽난로{{ cards.chimneys }}.jpg" class='rounded-4' style='border:4px solid white'>
            <a data-bs-toggle="modal" data-bs-target="#owner" style='cursor:pointer'>
              <div style='position: absolute; top:2rem; left:2rem;'>
                <img src='/static/images/유저장식{{ cards.userdeco }}.png' style='width:4rem;'>
              </div>
            </a>
          </div>
          {% else %}
          <div>
            <img src="/static/images/벽난로{{ cards.chimneys }}.jpg" class='rounded-4' style='border:4px solid white'>
          </div>
          {% endif %}
        {% endif %}
      </div>
    </div>
    {% if cards.user != request.user %}
    <div class='d-grid'>
      <a href="{% url 'cards:usercard_comment' cards.pk %}" class="btn btn-primary my-3 fs-4"> 벽난로 꾸며주기 </a>
    </div>
    {% endif %}
  </div>
</div>
{% for comment in comments %}
  {% if comment.ribbons == 1 %}
    <button type="button" class="btn" data-bs-toggle="modal" data-bs-target="#{{comment.id_text}}">
      <img src="{%static 'images/리본1.png' %}">
    </button>

    <div class="modal fade" id="{{comment.id_text}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-body">
            {{ comment.content }}
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
          </div>
        </div>
      </div>
    </div>


  {% elif comment.ribbons == 2%}
    <button type="button" class="btn" data-bs-toggle="modal" data-bs-target="#{{comment.id_text}}">
      <img src="{%static 'images/리본2.png' %}">
    </button>

  {% endif %}
  <h2> {{ comment.content }} | {{ comment.created_at }} | {{comment.ribbons}} </h2>

  <div class="modal fade" id="{{comment.id_text}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-body">
          {{ comment.content }}
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
        </div>
      </div>
    </div>
  </div>

{% endfor %}

{% endblock %}